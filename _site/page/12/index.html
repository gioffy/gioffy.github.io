<!DOCTYPE HTML>

<html lang="it-IT">

<head>
	<meta charset="utf-8">
	<title>Giorgio Formica</title>
	<meta name="author" content="Giorgio Formica">
	
	<meta name="description" content="
		Giorgio Formica's Blog
	">
	

	<!-- http://t.co/dKP3o1e -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="http://feeds.feedburner.com/Gioffy" rel="alternate" title="Giorgio Formica" type="application/atom+xml">
	
	<link rel="canonical" href="http://gioffy.github.io/page/12/">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,700,800' rel='stylesheet' type='text/css'>
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="/css/code.css" type="text/css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="/js/slash.js" async></script>
	
  	
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-18516027-1']);
		
		
      _gaq.push(['_setDomainName','.gioffy.com']);
		
		
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>





</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner"><div class="profilepic">
	
	<img src="https://2.gravatar.com/avatar/8948c057447f75653fa747229189cdb9?s=160" alt="Profile Picture" style="width: 160px;" />
	
</div>
<hgroup>
  <h1><a href="/">Giorgio Formica</a></h1>
  
    <h2>The other one.</h2>
  
</hgroup>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/about/">about</a></li>
  <li><a href="/archive">archives</a></li>
  <li><a href="/tags">tags</a></li>
  <li><a href="https://github.com/imperugo/feedback/issues/new">contact</a></li>
</ul>


<section class="aboutme">
  <p>
    Giorgio Formica's Blog
  </p>
</section>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		
			<a class="twitter" href="http://twitter.com/gioffy" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/gioffy" title="GitHub">GitHub</a>
		
		
			<a class="rss" href="http://feeds.feedburner.com/Gioffy" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>
		<div class="mid-col">
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">



    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/2010/10/04/mvp-award-again/" itemprop="url">MVP Award Again!</a></h1>
	<div class="meta">
	<span class="date">



  


<time datetime="2010-10-04T16:25:24Z"  itemprop="datePublished">October  4, 2010</time></span>
	<span class="categories">various</span>
	
		
  


<span class="comments"><a href="/2010/10/04/mvp-award-again/#disqus_thread">comments</a></span>
	
	<span class="edit">
  


<a href="https://github.com/gioffy/gioffy.github.io/edit/gh-pages/_posts/2010-10-04-mvp-award-again.markdown">edit</a>
</span>
</div>
	<div class="entry-content" itemprop="articleBody">
		<p><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px 11px 0px 0px; padding-left: 0px; padding-right: 0px; display: inline; float: left; border-top: 0px; border-right: 0px; padding-top: 0px" title="images" border="0" alt="images" align="left" src="http://tostring.it/UserFiles/imperugo/images_3.jpg" width="56" height="86" /></p>  <p>Venerdì ho ricevuto la mail di conferma da quel pazzo di <a title="Alessandro Teglia&#39;s Blog" href="http://blogs.technet.com/b/alead_msft/" rel="nofollow" target="_blank">Alead</a>, che mi comunicava il rinnovo dell’award (in MS ci sono tanti “pazzi” :D).    <br />In ogni caso devo dire che l’emozione è al pari della prima nomina, e spero di poter migliorare contenuti, sia in qualità sia quantità, anche se quest’ultimo periodo non rispetta molto queste parole.    <br />Un super ringraziamento a tutti voi che mi seguite ed i complimenti ai nuovi ed ai rinnovati <a title="MVP Program" href="http://blogs.msdn.com/b/mvpawardprogram/" rel="nofollow" target="_blank">compagni di avventure</a>.</p>  <p>Ciauz</p>

		
		
	</div>


    </article>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/2010/09/21/scoperta-una-vulnerabilita-su-asp-net/" itemprop="url">Scoperta una vulnerabilità su ASP.NET</a></h1>
	<div class="meta">
	<span class="date">



  


<time datetime="2010-09-21T15:15:00Z"  itemprop="datePublished">September 21, 2010</time></span>
	<span class="categories">asp.net</span>
	
		
  


<span class="comments"><a href="/2010/09/21/scoperta-una-vulnerabilita-su-asp-net/#disqus_thread">comments</a></span>
	
	<span class="edit">
  


<a href="https://github.com/gioffy/gioffy.github.io/edit/gh-pages/_posts/2010-09-21-scoperta-una-vulnerabilita-su-asp-net.markdown">edit</a>
</span>
</div>
	<div class="entry-content" itemprop="articleBody">
		<p>Tramite il blog di <a title="Scott Guthrie&#39;s Blog" href="http://weblogs.asp.net/scottgu/" rel="nofollow" target="_blank">Scott Guthrie</a>, è stata presentata una soluzione temporanea ad un recente problema di vulnerabilità scoperto nel Framework ASP.NET, a partire dalla versione 1.1 fino ad arrivare alla recente 4.0.    <br />La vulnerabilità è piuttosto grave in quanto, in determinate condizioni di configurazione, un utente malintenzionato potrebbe scaricare files contenenti informazioni riservate, come il web.config.    <br /><strong>Prima di allarmarsi è necessario capire che il problema è facilmente risolvibile</strong>: è possibile proteggere le proprie applicazioni da questo tipo di attacco senza dover ricompilare e/o deployare il sito, ma semplicemente caricando una pagina sul server e modificando il file di configurazione.</p>  <p>Come prima cosa è necessario creare una semplice pagina .aspx “user friendly” contente un messaggio che comunica all’utente il verificarsi di un errore all’interno dell’applicazione, ed inserire il seguente codice direttamente nella pagina stessa:</p>  <p>&#160;</p>  

<div class="highlight"><pre><code class="xml">//VB.NET

<span class="err">&lt;</span>%@ Page Language=&quot;VB&quot; AutoEventWireup=&quot;true&quot; %&gt;
<span class="err">&lt;</span>%@ Import Namespace=&quot;System.Security.Cryptography&quot; %&gt;
<span class="err">&lt;</span>%@ Import Namespace=&quot;System.Threading&quot; %&gt;

<span class="nt">&lt;script</span> <span class="na">runat=</span><span class="s">&quot;server&quot;</span><span class="nt">&gt;</span>
    Sub Page_Load()
        Dim delay As Byte() = New Byte(0) {}
        Dim prng As RandomNumberGenerator = New RNGCryptoServiceProvider()
        
        prng.GetBytes(delay)
        Thread.Sleep(CType(delay(0), Integer))
        
        Dim disposable As IDisposable = TryCast(prng, IDisposable)
        If Not disposable Is Nothing Then
            disposable.Dispose()
        End If
    End Sub
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head</span> <span class="na">runat=</span><span class="s">&quot;server&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Error<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div&gt;</span>
        Si è verificato un errore
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

//C# 

<span class="err">&lt;</span>%@ Page Language=&quot;C#&quot; AutoEventWireup=&quot;true&quot; %&gt;
<span class="err">&lt;</span>%@ Import Namespace=&quot;System.Security.Cryptography&quot; %&gt;
<span class="err">&lt;</span>%@ Import Namespace=&quot;System.Threading&quot; %&gt;

<span class="nt">&lt;script</span> <span class="na">runat=</span><span class="s">&quot;server&quot;</span><span class="nt">&gt;</span>
   void Page_Load() {
      byte[] delay = new byte[1];
      RandomNumberGenerator prng = new RNGCryptoServiceProvider();

      prng.GetBytes(delay);
      Thread.Sleep((int)delay[0]);
        
      IDisposable disposable = prng as IDisposable;
      if (disposable != null) { disposable.Dispose(); }
    }
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head</span> <span class="na">runat=</span><span class="s">&quot;server&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Error<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div&gt;</span>
       Si è verificato un errore
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>

<p>A questo punto non ci resta che registrare la pagina appena creata all’interno del file di configurazione ed il gioco è fatto.</p>

<div class="highlight"><pre><code class="xml"><span class="nt">&lt;configuration&gt;</span>
   <span class="nt">&lt;system.web&gt;</span>
     <span class="nt">&lt;customErrors</span> <span class="na">mode=</span><span class="s">&quot;On&quot;</span> <span class="na">redirectMode=</span><span class="s">&quot;ResponseRewrite&quot;</span> <span class="na">defaultRedirect=</span><span class="s">&quot;~/error.aspx&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/system.web&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div>

<p>Per chi fosse interessato alla vulnerabilità, consiglio la lettura del post ufficiale di Scott Guthrie con tutta la spiegazione del problema che trovate <a title="Important: ASP.NET Security Vulnerability" href="http://weblogs.asp.net/scottgu/archive/2010/09/18/important-asp-net-security-vulnerability.aspx" rel="nofollow" target="_blank">qui</a>.</p>

		
		
	</div>


    </article>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/2010/09/20/introduzione-a-conform/" itemprop="url">Introduzione a ConfORM</a></h1>
	<div class="meta">
	<span class="date">



  


<time datetime="2010-09-20T15:45:00Z"  itemprop="datePublished">September 20, 2010</time></span>
	<span class="categories">orm</span>
	
		
  


<span class="comments"><a href="/2010/09/20/introduzione-a-conform/#disqus_thread">comments</a></span>
	
	<span class="edit">
  


<a href="https://github.com/gioffy/gioffy.github.io/edit/gh-pages/_posts/2010-09-20-introduzione-a-conform.markdown">edit</a>
</span>
</div>
	<div class="entry-content" itemprop="articleBody">
		<p>Chi mi segue su <a title="My Twitter Page" href="http://twitter.com/imperugo" rel="nofollow" target="_blank">Twitter</a> sicuramente saprà che ultimamente mi sono messo a “giocare” un po’ con <strong><a title="ConfORM Project page" href="http://code.google.com/p/codeconform/" rel="nofollow" target="_blank">ConfORM</a></strong>, e, nello specifico, ho deciso di rimpiazzare FluentNHibernate in <a title="Dexter Blog Engine Category" href="http://www.imperugo.tostring.it/categories/archive/Dexter" target="_blank">Dexter</a>, per far strada al Framework prodotto da <a title="Fabio Maulo&#39;s blog" href="http://fabiomaulo.blogspot.com/" rel="nofollow" target="_blank">Fabio Maulo</a>.</p>  <p>Per chi non lo conoscesse, ConfORM è un Framework che facilità incredibilmente tutta la parte di mapping del nostro dominio - quando si utilizza NHibernate per la persistenza - cambiando totalmente l’approccio; ma andiamo per gradi.</p>  <p>Oggigiorno esistono diversi modi di scrivere il mapping per <a title="NHibernate posts" href="http://www.tostring.it/categories/archive/nhibernate/" target="_blank">NHibernate</a>, partendo dal classico e mai datato XML, fino ad arrivare a Framework più recenti come FluntNHibernate, Ddl2Hbm, VisualNHibernate, etc.     <br />Purtroppo questi framework hanno lo stesso approccio, obbligandoci a specificare la corrispondenza di ogni singola property di ciascuna classe di dominio verso il database.</p>  <p>Non conosco i vostri gusti relativamente alla scrittura di codice, ma personalmente ritengo molto noiosa e ripetitiva la fase di stesura del mapping, motivo per cui ConfORM la vince su tutti gli altri.</p>  <h4><b>L’approccio di ConfORM.</b></h4>  <p>Come già accennato ConfORM ha preso totalmente un’altra strada; di fatto inizialmente può lasciare l’utente un po’ spiazzato, ma quando si è capito il funzionamento è sicuramente un viaggio di sola andata, in quanto induce ad abbandonare totalmente il mapping “tradizionale”.    <br />Di fatto quello che è necessario fare è “istruire” ConfORM con le nostre “regole” di sviluppo e di nomenclatura e specificare solo le eventuali eccezioni, lasciando a lui il compito di generare e gestire tutta la fase di mapping.</p>  <p>Per capire meglio il vantaggio, il grafico seguente mostra il Dominio di Dexter che in precedenza era mappato con FluentNHibernate in 27 classi differenti ed ora è mappato in poco più di 20 righe di mapping </p>  <p>&#160;</p>  <p><a href="http://tostring.it/UserFiles/imperugo/ClassDiagram1_2.png" rel="shadowbox[ConfORM1]"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="ClassDiagram1" border="0" alt="ClassDiagram1" src="http://tostring.it/UserFiles/imperugo/ClassDiagram1_thumb.png" width="474" height="374" /></a></p>  <h4><font style="font-weight: bold">Maggior Produttività e controllo.</font>     <br /></h4>  <p><b></b>Un altro vantaggio sicuramente interessante è l’aumento di produttività: possiamo aggiungere e togliere classi al nostro dominio senza toccare il mapping, a condizione che queste rispettino le regole stabilite precedentemente.     <br />Quest’aspetto è sicuramente molto interessante perché ci permette di modificare il dominio senza preoccuparci di dover aggiornare il mapping, e riduce il rischio di introdurre errori dovuti ai continui cambiamenti.     <br />Un altro aspetto che adoro è la rigidità che si può introdurre nel lavoro in team, in quanto se qualche sviluppatore non rispetta le regole di mapping prestabilite è obbligato ad andare a dichiarare l’eccezione manualmente e quindi il cambiamento è facilmente identificabile; un esempio banale potrebbe essere la nomenclatura delle tabelle: si è stabilito che sul database esse debbano chiamarsi con il nome della classe di dominio ma al plurare e, se un dev vuol chiamare la tabella in maniera differente è obbligato a gestire lo special case a mano e specificarlo nel mapping.</p>  <h4><b>Performance:</b></h4>  <p>L’utilizzo di ConfORM porta anche vantaggi prestazionali alla nostra applicazione in quanto, a differenza di tutti gli altri Framework di mapping, genera direttamente le classi necessarie a NHibernate per il suo utilizzo, saltando così tutta la fase di parsing del file xml contenente il mapping.    <br />Ovviamente quest’aumento di performance è beneficiabile solo in fase di startup ed è sicuramente apprezzabile quando si ha a che fare con domini piuttosto corposi.     <br />Per capire meglio il funzionamento di ConfORM rispetto al classico mapping o ad altri Framework, riporto qui un grafico “rubato” dal blog di Fabio che spiega perfettamente il perché dell’aumento di performances.</p>  <p>&#160;</p>  <p><a href="http://tostring.it/UserFiles/imperugo/confORM_2.png" rel="shadowbox[ConfORM1]"><img style="background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="confORM" border="0" alt="confORM" src="http://tostring.it/UserFiles/imperugo/confORM_thumb.png" width="474" height="445" /></a></p>  <h4><strong></strong></h4>  <h4><strong>Conclusioni</strong>:</h4>  <p><strong></strong>Ovviamente seguiranno altri post che mostreranno la parte più tecnica di ConfORM, ma per chi non volesse aspettare riporto alcuni link utili:</p>  <ul>   <li>Download di ConfORM – <a title="Download ConfORM" href="http://code.google.com/p/codeconform/" rel="nofollow" target="_blank">Download</a>. </li>    <li>Una serie di post su ConfORM è disponibile <a title="ConfORM Posts" href="http://fabiomaulo.blogspot.com/search/label/ConfORM" rel="nofollow" target="_blank">qui</a>. </li> </ul>  <p>Enjoy your mapping.</p>

		
		
	</div>


    </article>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/2010/09/15/generazione-di-dati-fake-durante-la-scrittura-di-test/" itemprop="url">Generazione di dati fake durante la scrittura di test.</a></h1>
	<div class="meta">
	<span class="date">



  


<time datetime="2010-09-15T15:00:00Z"  itemprop="datePublished">September 15, 2010</time></span>
	<span class="categories">.net</span>
	
		
  


<span class="comments"><a href="/2010/09/15/generazione-di-dati-fake-durante-la-scrittura-di-test/#disqus_thread">comments</a></span>
	
	<span class="edit">
  


<a href="https://github.com/gioffy/gioffy.github.io/edit/gh-pages/_posts/2010-09-15-generazione-di-dati-fake-durante-la-scrittura-di-test.markdown">edit</a>
</span>
</div>
	<div class="entry-content" itemprop="articleBody">
		<p>Spessissimo, quando mi trovo a dover scrivere dei test, ho la necessità di creare delle istanze di classi contenenti dei dati finti, in modo da verificarne il corretto funzionamento.</p>  <p>Di fatto, se proviamo ad immaginare di dover testare un metodo ForEach per una classe IEnumerable(vedi <a title="ForEach in un IEnumerable" href="http://tostring.it/blog/post/foreach-ienumerable-of-t" target="_blank">qui</a>), sicuramente nel test dobbiamo creare una lista contente gli elementi da iterare.     <br />Anche se semplice, la creazione di un set di informazioni finte, anche tramite classi “helper”, può risultare una fase noiosa e ripetitiva.     <br />Grazie ad un consiglio di Fabio ho provato questo framework, che ci aiuta tantissimo nella creazione di liste - ma anche di singole istanze - con dati fake.</p>  <p>Il funzionamento è piuttosto banale ed intuitivo: di fatto si ha una composizione fluent che ci permette di coprire i principali scenari.</p>  <p>Per capire il suo potenziale provate ad immaginare di dover creare una lista di 10 elementi…con <a title="NBuilder Home Page" href="http://nbuilder.org" rel="nofollow" target="_blank">NBuilder</a> si può ottenere lo stesso risultato con una sola riga di codice! J</p>  

<div class="highlight"><pre><code class="csharp"><span class="kt">var</span> <span class="n">posts</span> <span class="p">=</span> <span class="n">Builder</span><span class="p">&lt;</span><span class="n">Post</span><span class="p">&gt;.</span><span class="n">CreateListOfSize</span><span class="p">(</span><span class="m">10</span><span class="p">).</span><span class="n">Build</span><span class="p">();</span>
</code></pre></div>

<p><br />Ovviamente si possono specificare anche criteri un po’ più “strong”, forzando il valore di una specifica proprietà o addirittura alternando un valore all’interno della lista. </p>

<div class="highlight"><pre><code class="csharp"><span class="kt">var</span> <span class="n">posts</span> <span class="p">=</span> <span class="n">Builder</span><span class="p">&lt;</span><span class="n">Post</span><span class="p">&gt;.</span><span class="n">CreateListOfSize</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>
                <span class="p">.</span><span class="n">WhereAll</span><span class="p">()</span>
                <span class="p">.</span><span class="n">Have</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Username</span> <span class="p">=</span> <span class="s">&quot;imperugo&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="n">Build</span><span class="p">();</span>
</code></pre></div>

<p>Un'altra feature che trovo interessantissima è la possibilità di persistere l’oggetto su di un nostro repository, quindi invocare un metodo passando il dato creato. Chi scrive integration test troverà sicuramente questa feature molto vantaggiosa.</p>

<div class="highlight"><pre><code class="csharp"><span class="c1">//Definisco il servizio di persistenza da invocare</span>
<span class="n">BuilderSetup</span><span class="p">.</span><span class="n">SetCreatePeristenceMethod</span><span class="p">&lt;</span><span class="n">Post</span><span class="p">&gt;</span> <span class="p">(</span><span class="n">postService</span><span class="p">.</span><span class="n">SaveOrUpdate</span><span class="p">);</span>

<span class="c1">//Persisto l&#39;oggetto fake</span>
<span class="n">Builder</span><span class="p">&lt;</span><span class="n">Post</span><span class="p">&gt;.</span><span class="n">CreateNew</span><span class="p">().</span><span class="n">Persist</span><span class="p">();</span>
</code></pre></div>

<p>Ovviamente il framework offre numerosissime altre features, che trovate <a title="NBuilder" href="http://nbuilder.org/Documentation" rel="nofollow" target="_blank">qui</a>.</p>

<p>Direi un must.</p>

<p>Enjoy it.</p>

		
		
	</div>


    </article>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/2010/09/07/implementare-opensearch-sul-proprio-sito/" itemprop="url">Implementare OpenSearch sul proprio sito</a></h1>
	<div class="meta">
	<span class="date">



  


<time datetime="2010-09-07T15:00:00Z"  itemprop="datePublished">September  7, 2010</time></span>
	<span class="categories">asp.net</span>
	
		
  


<span class="comments"><a href="/2010/09/07/implementare-opensearch-sul-proprio-sito/#disqus_thread">comments</a></span>
	
	<span class="edit">
  


<a href="https://github.com/gioffy/gioffy.github.io/edit/gh-pages/_posts/2010-09-07-implementare-opensearch-sul-proprio-sito.markdown">edit</a>
</span>
</div>
	<div class="entry-content" itemprop="articleBody">
		<p>Nel weekend scorso ho deciso di implementare l’<a title="Open Search Official Site" href="http://www.opensearch.org/Home" target="_blank" rel="nofollow">OpenSearch</a> all’interno del mio blog in modo da offrire un servizio in più ed imparare una cosa nuova.
In pratica lo scopo era di creare un provider di ricerca per i principali browser di navigazione come Internet Explorer, Firefox e Chrome.
L’implementazione è piuttosto banale: basta creare un HttpHandler - o un file statico nel caso in cui le informazioni non necessitino di una gestione dinamica - contenente un set d’informazioni in formato XML, aggiungere il link a tale risorsa nell’header della pagina, ed il gioco è fatto; il browser penserà poi a recuperare in automatico le informazioni e a “proporvi” il provider di ricerca da aggiungere.
Il codice dell’HttpHandler è veramente banale e lo potete vedere qui di seguito:</p>

<p>[csharp]
public class OpenSearchHandler : HttpHandlerBase
{
    private readonly ISiteConfigurationService siteConfigurationService;
    private readonly IUrlBuilderService urlBuilder;</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">public OpenSearchHandler ()
{
    siteConfigurationService = IoC.Resolve&amp;amp;lt;ISiteConfigurationService&amp;amp;gt; ();
    urlBuilder = IoC.Resolve&amp;amp;lt;IUrlBuilderService&amp;amp;gt; ();
}

public OpenSearchHandler ( ISiteConfigurationService siteConfigurationService , IUrlBuilderService urlBuilder )
{
    this.siteConfigurationService = siteConfigurationService;
    this.urlBuilder = urlBuilder;
}

public override void ProcessRequest ( HttpContextBase context )
{
    SiteConfigurationDTO configuration = siteConfigurationService.GetConfiguration ();

    StringBuilder sb = new StringBuilder ( &amp;quot;&amp;amp;lt;OpenSearchDescription xmlns=\&amp;quot;http://a9.com/-/spec/opensearch/1.1/\&amp;quot;&amp;amp;gt; &amp;quot; );
    sb.AppendFormat ( &amp;quot;&amp;amp;lt;ShortName&amp;amp;gt;{0}&amp;amp;lt;/ShortName&amp;amp;gt;&amp;quot; , configuration.BlogName );
    sb.AppendFormat ( &amp;quot;&amp;amp;lt;Description&amp;amp;gt;{0}&amp;amp;lt;/Description&amp;amp;gt;&amp;quot; , configuration.SeoConfiguration.DefaultDescription );
    sb.AppendFormat ( &amp;quot;&amp;amp;lt;Image height=\&amp;quot;16\&amp;quot; width=\&amp;quot;16\&amp;quot; type=\&amp;quot;image/vnd.microsoft.icon\&amp;quot;&amp;amp;gt;{0}{1}&amp;amp;lt;/Image&amp;amp;gt;&amp;quot; , urlBuilder.SiteWithHttp () , &amp;quot;Images/favicon.ico&amp;quot; );
    sb.AppendFormat(&amp;quot;&amp;amp;lt;Url type=\&amp;quot;text/html\&amp;quot; template=\&amp;quot;{0}blog/search?q={1}\&amp;quot; /&amp;amp;gt; &amp;quot;, urlBuilder.SiteWithHttp(), &amp;quot;{searchTerms}&amp;quot;);
    sb.AppendFormat(&amp;quot;&amp;amp;lt;Url type=\&amp;quot;application/rss+xml\&amp;quot; template=\&amp;quot;{0}blog/search?q={1}\&amp;quot; /&amp;amp;gt; &amp;quot;, urlBuilder.SiteWithHttp(), &amp;quot;{searchTerms}&amp;quot;);
    sb.Append ( &amp;quot;&amp;amp;lt;/OpenSearchDescription&amp;amp;gt;&amp;quot; );

    context.Response.ContentEncoding = Encoding.UTF8;
    AddHeaders ( &amp;quot;text/xml&amp;quot; , 30 , sb.GetHashCode () );

    context.Response.Write ( sb.ToString () );
}
</code></pre></div>
<p>}
[/csharp]</p>

<p>Mentre per quanto riguarda l’header della pagina html, è sufficiente inserire il seguente markup html:
[xml]&amp;lt;link type=&quot;application/opensearchdescription+xml&quot; rel=&quot;search&quot; title=&quot;Il blog di ugo lattanzi&quot; href=&quot;/opensearch.axd&quot;/&amp;gt;[/xml]
A questo punto il risultato dovrebbe essere più o meno quello riportato negli screenshot seguenti:</p>

<p><strong>Internet Explorer:</strong></p>

<p><a href="http://tostring.it/UserFiles/imperugo/image_8.png" rel="shadowbox[OpenSearch]"><img style="margin: 0px 5px 0px 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" alt="image" src="http://tostring.it/UserFiles/imperugo/image_thumb_3.png" width="249" height="164" border="0" /></a><a href="http://tostring.it/UserFiles/imperugo/image_10.png" rel="shadowbox[OpenSearch]"><img style="background-image: none; margin: 0px 5px 0px 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" alt="image" src="http://tostring.it/UserFiles/imperugo/image_thumb_4.png" width="216" height="164" border="0" /></a><a href="http://tostring.it/UserFiles/imperugo/image_12.png" rel="shadowbox[OpenSearch]"><img style="background-image: none; margin: 0px 5px 0px 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" alt="image" src="http://tostring.it/UserFiles/imperugo/image_thumb_5.png" width="249" height="164" border="0" /></a></p>

<p><strong>FireFox:</strong></p>

<p><a href="http://tostring.it/UserFiles/imperugo/image_2_1.png" rel="shadowbox[OpenSearch]"><img style="background-image: none; margin: 0px 5px 0px 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" alt="image" src="http://tostring.it/UserFiles/imperugo/image_thumb_1.png" width="243" height="164" border="0" /></a><a href="http://tostring.it/UserFiles/imperugo/image_4.png" rel="shadowbox[OpenSearch]"><img style="background-image: none; margin: 0px 5px 0px 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" alt="image" src="http://tostring.it/UserFiles/imperugo/image_thumb_1_1.png" width="226" height="164" border="0" /></a><a href="http://tostring.it/UserFiles/imperugo/image_6.png" rel="shadowbox[OpenSearch]"><img style="background-image: none; margin: 0px 5px 0px 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" alt="image" src="http://tostring.it/UserFiles/imperugo/image_thumb_2.png" width="231" height="164" border="0" /></a></p>

<p>Nota: Chi fosse interessato può esporre anche il suggest nella ricerca, restituendo un set di informazioni in formato json (vedi <a title="OpenSearch Suggest" href="http://www.opensearch.org/Specifications/OpenSearch/Extensions/Suggestions/1.1" target="_blank" rel="nofollow">qui</a>).</p>

<p>Ciauz</p>

		
		
	</div>


    </article>


</div>
<nav id="pagenavi">
    
        <a href="/page/11" class="prev">Prev</a>
    
    
        <a href="/page/13" class="next">Next</a>
    
    <div class="center"><a href="/archive">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014 - Giorgio Formica Blog content licensed under the Creative Commons <a href="http://creativecommons.org/licenses/by/2.5/">CC BY 2.5</a> | <a href="/privacy">privacy</a> | <a href="/articles/blogtegrity">blogtegrity</a>
</p>
<img id="feedburner-count" src="http://feedproxy.google.com/~fc/imperugo?bg=FFFFFF&amp;fg=999999&amp;anim=0" alt="Reader count" />

  

<script type="text/javascript">
      var disqus_shortname = 'it-tostring';
      
    (function () {
    
      var countScript = document.createElement('script');
      countScript.type = 'text/javascript';
      countScript.async = true;
      countScript.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(countScript);
    }());
</script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</footer>
		</div>
	</div>


<!--  CodeProject AD  -->
<script>
    function _dmBootstrap(file) {
        var _dma = document.createElement('script'); 
        _dma.type = 'text/javascript';
        _dma.async = true; 
        _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + file;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
    }
    function _dmFollowup(file) { if (typeof DMAds === 'undefined')  _dmBootstrap('cdn2.DeveloperMedia.com/a.min.js');}
    (function () { _dmBootstrap('cdn1.DeveloperMedia.com/a.min.js'); setTimeout(_dmFollowup, 2000);})();
</script>
</body>
</html>
